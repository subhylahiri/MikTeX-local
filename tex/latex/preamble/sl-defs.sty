%%  My standard definitions for mathematics.
%%
%% Requires packages: amsmath, amssymb, amsthm*, delim*, xparse*
%%  (* depending on options)
%%
%% Options: (no)delims  - use sl-delims.sty
%%          (no)derivs  - use sl-derivs.sty
%%          (no)symb    - define symbols
%%          theorem     - use amsthm and define theorem-like environments
%%
%% History: 2018/04/02 v1.0      copied from sl_definitions.tex
%%          2021/06/16 v2.0      use expl3
%-------------------------------------------------------------------------------
\RequirePackage{expl3}
\ProvidesExplPackage {sl-defs} {2018/4/20} {v2.0} {standard definitions}
\ExplSyntaxOn
%--------------------------------------------------------------------------------
\RequirePackage{l3keys2e}
\bool_new:N \g__sldefs_delims_bool
\bool_new:N \g__sldefs_derivs_bool
\bool_new:N \g__sldefs_symb_bool
\bool_new:N \g__sldefs_thm_bool
\RequirePackage{amsmath,amssymb}
%--------------------------------------------------------------------------------
\keys_define:nn { sldefs }
  {
    nodelims .bool_gset_inverse:N = \g__sldefs_delims_bool,
    nodelims .default:n = true,
    delims .bool_gset:N = \g__sldefs_delims_bool,
    delims .default:n = true,
    delims .initial:n = true,
    noderivs .bool_gset_inverse:N = \g__sldefs_derivs_bool,
    noderivs .default:n = true,
    derivs .bool_gset:N = \g__sldefs_derivs_bool,
    derivs .default:n = true,
    derivs .initial:n = true,
    nosymb .bool_gset_inverse:N = \g__sldefs_symb_bool,
    nosymb .default:n = true,
    symb .bool_gset:N = \g__sldefs_symb_bool,
    symb .default:n = true,
    symb .initial:n = true,
    theorem .bool_gset:N = \g__sldefs_thm_bool,
    theorem .default:n = true,
    theorem .initial:n = false,
  }
\ProcessKeysPackageOptions { sldefs }
%================================================================================
\bool_if:NT \g__sldefs_delims_bool { \RequirePackage{sl-delims} }
\bool_if:NT \g__sldefs_derivs_bool { \RequirePackage{sl-derivs} }
%--------------------------------------------------------------------------------
\newcommand{\vp}{\vspace{0.5cm}}
\newcommand{\hp}{\hspace{0.5cm}}
%
%e.g., i.e. with normal spaces
\newcommand{\eg}{e.g.\ }
\newcommand{\ie}{i.e.\ }
\newcommand{\cf}{cf.\ }
\newcommand{\etc}{etc.\ }
\newcommand{\wrt}{wrt.\ }
\newcommand{\wlg}{wlg.\ }
\newcommand{\Eg}{E.g.\ }
\newcommand{\Ie}{I.e.\ }
\newcommand{\Cf}{Cf.\ }
\newcommand{\Etc}{Etc.\ }
\newcommand{\Wlg}{Wlg.\ }
%
\newcommand{\ra}{\rightarrow}
\newcommand{\lr}{\leftrightarrow}
\newcommand{\cdt}{\!\cdot\!}
%
% indices
\newcommand{\up}[1]{\mbox{}^{#1}}
\newcommand{\dn}[1]{\mbox{}_{#1}}
\newcommand{\rp}[1]{^{(#1)}}
\newcommand{\lp}[1]{_{(#1)}}
\newcommand{\psq}{^{\prime\,2}}
\newcommand{\ppsq}{^{\prime\prime\,2}}
%
% Un-italicised letters
\newcommand{\dr}{\mathrm{d}}
\newcommand{\e}{\mathrm{e}}
\newcommand{\ir}{\mathrm{i}}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\Det}{Det}
\DeclareMathOperator{\cov}{Cov}
\DeclareMathOperator{\var}{Var}
\DeclareMathOperator{\bias}{Bias}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\csch}{cosech}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\phase}{phase}
\newcommand{\lmax}{_\text{max}}
\newcommand{\lmin}{_\text{min}}
%
% Matrix notation
\newcommand{\inv}{^{-1}}
\newcommand{\invsq}{^{-2}}
\newcommand{\trans}{^\mathrm{T}}
\newcommand{\transp}{{}^\mathrm{T}}
\newcommand{\dg}{^\mathrm{dg}}
\newcommand{\I}{\mathbf{I}}
%
% The default \Im and \Re look crap
\renewcommand{\Im}{\operatorname{\mathbbm{Im}}}
\renewcommand{\Re}{\operatorname{\mathbbm{Re}}}
%
% logic
\newcommand{\means}{\Longleftrightarrow}
\newcommand{\requires}{\Longleftarrow}
%--------------------------------------------------------------------------------
\bool_if:NT \g__sldefs_symb_bool
% \iftoggle{sl@symb}
{%
  \RequirePackage{bbm}
  %
  \newcommand{\R}{\mathbb{R}}
  \newcommand{\C}{\mathbb{C}}
%  \newcommand{\CP}{\mathbb{CP}} %use \C\Pr instead
  \newcommand{\Z}{\mathbb{Z}}
  \newcommand{\E}{\mathbb{E}}
  \renewcommand{\Pr}{\mathbb{P}}
  %
  \newcommand{\CA}{\mathcal{A}}
  \newcommand{\CB}{\mathcal{B}}
  \newcommand{\CC}{\mathcal{C}}
  \newcommand{\CD}{\mathcal{D}}
  \newcommand{\CE}{\mathcal{E}}
  \newcommand{\CF}{\mathcal{F}}
  \newcommand{\CG}{\mathcal{G}}
  \newcommand{\CH}{\mathcal{H}}
  \newcommand{\CI}{\mathcal{I}}
  \newcommand{\CJ}{\mathcal{J}}
  \newcommand{\CK}{\mathcal{K}}
  \newcommand{\CL}{\mathcal{L}}
  \newcommand{\CM}{\mathcal{M}}
  \newcommand{\CN}{\mathcal{N}}
  \newcommand{\CO}{\mathcal{O}}
  \newcommand{\CP}{\mathcal{P}}
  \newcommand{\CQ}{\mathcal{Q}}
  \newcommand{\CR}{\mathcal{R}}
  \newcommand{\CS}{\mathcal{S}}
  \newcommand{\CT}{\mathcal{T}}
  \newcommand{\CU}{\mathcal{U}}
  \newcommand{\CV}{\mathcal{V}}
  \newcommand{\CW}{\mathcal{W}}
  \newcommand{\CX}{\mathcal{X}}
  \newcommand{\CY}{\mathcal{Y}}
  \newcommand{\CZ}{\mathcal{Z}}
  %
  \newcommand{\ad}{{\dot{\alpha}}}
  \newcommand{\bd}{{\dot{\beta}}}
  \newcommand{\gd}{{\dot{\gamma}}}
  \newcommand{\dd}{{\dot{\delta}}}
  \newcommand{\ed}{{\dot{\epsilon}}}
  %
  \newcommand{\bs}{\overline{\sigma}}
  \newcommand{\br}{\overline{\rho}}
  \newcommand{\bpsi}{\overline{\psi}}
  \newcommand{\bPsi}{\overline{\Psi}}
  \newcommand{\zb}{\bar{z}}
  \newcommand{\wb}{\overline{w}}
  \newcommand{\ab}{\bar{a}}
  \newcommand{\bb}{\bar{b}}
  \newcommand{\cb}{\bar{c}}
  %
  \newcommand{\apm}{{\alpha^{\prime}}}
  \newcommand{\adg}{a^\dagger}
}%{}
%--------------------------------------------------------------------------------
\bool_if:NT \g__sldefs_thm_bool
% \iftoggle{sl@theorem}
{
  \RequirePackage{amsthm}
  \newtheoremstyle{sldefinition}%
    {3pt}%space above
    {3pt}%space below
    {}%body font
    {}%indent amount
    {\bfseries}%theorem head font
    {}%theorem head punctuation
    {\newline}%space after head
    {\thmname{#1}\thmnumber{~#2}:{\bfseries\thmnote{~#3}}}%head spec
  \newtheoremstyle{slplain}%
    {3pt}%space above
    {3pt}%space below
    {}%body font
    {}%indent amount
    {\bfseries}%theorem head font
    {}%theorem head punctuation
    {\newline}%space after head
    {\thmname{#1}\thmnumber{~#2}{\bfseries\thmnote{~(#3)}}:~}%head spec
  %
  \theoremstyle{slplain}
  \newtheorem{thm}{Theorem}
  \newtheorem{cor}[thm]{Corollary}
  \newtheorem{lem}[thm]{Lemma}
  %
  \theoremstyle{sldefinition}
  \newtheorem{defn}{Definition}
  %
  \theoremstyle{remark}
  \newtheorem*{notn}{Notation}
  \newtheorem*{rem}{Remark}
}%{}
%--------------------------------------------------------------------------------
\endinput
